<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Backend Integration Test</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 p-8">
    <div class="max-w-4xl mx-auto">
        <h1 class="text-3xl font-bold mb-6">ğŸ”— å‰å¾Œç«¯é€£æ¥æ¸¬è©¦</h1>
        
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
            <button id="test-health" class="bg-green-500 hover:bg-green-600 text-white p-4 rounded-lg">
                ğŸ¥ å¥åº·æª¢æŸ¥
            </button>
            <button id="test-root" class="bg-blue-500 hover:bg-blue-600 text-white p-4 rounded-lg">
                ğŸ“¡ API è³‡è¨Š
            </button>
            <button id="test-all" class="bg-purple-500 hover:bg-purple-600 text-white p-4 rounded-lg">
                ğŸš€ å…¨éƒ¨æ¸¬è©¦
            </button>
        </div>
        
        <div id="results" class="bg-white p-6 rounded-lg shadow">
            <h2 class="text-xl font-semibold mb-4">æ¸¬è©¦çµæœï¼š</h2>
            <div id="output" class="text-gray-600">é»æ“Šä¸Šæ–¹æŒ‰éˆ•é–‹å§‹æ¸¬è©¦...</div>
        </div>
    </div>

    <script>
        const BACKEND_URL = 'http://localhost:8000';
        
        function updateOutput(message, isError = false) {
            const output = document.getElementById('output');
            const timestamp = new Date().toLocaleTimeString();
            const color = isError ? 'text-red-600' : 'text-green-600';
            output.innerHTML += `<div class="${color}">[${timestamp}] ${message}</div>`;
        }
        
        async function testHealth() {
            updateOutput('ğŸ¥ é–‹å§‹å¥åº·æª¢æŸ¥...');
            try {
                const response = await fetch(`${BACKEND_URL}/api/v1/health/`);
                const data = await response.json();
                updateOutput(`âœ… å¥åº·æª¢æŸ¥æˆåŠŸ: ${data.message} (ç‹€æ…‹: ${data.status})`);
                updateOutput(`ğŸ“Š å›æ‡‰æ•¸æ“š: ${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                updateOutput(`âŒ å¥åº·æª¢æŸ¥å¤±æ•—: ${error.message}`, true);
            }
        }
        
        async function testRoot() {
            updateOutput('ğŸ“¡ é–‹å§‹ç²å– API è³‡è¨Š...');
            try {
                const response = await fetch(`${BACKEND_URL}/`);
                const data = await response.json();
                updateOutput(`âœ… API è³‡è¨Šç²å–æˆåŠŸ`);
                updateOutput(`ğŸ“Š å›æ‡‰æ•¸æ“š: ${JSON.stringify(data, null, 2)}`);
            } catch (error) {
                updateOutput(`âŒ API è³‡è¨Šç²å–å¤±æ•—: ${error.message}`, true);
            }
        }
        
        async function testAll() {
            updateOutput('ğŸš€ é–‹å§‹å…¨éƒ¨æ¸¬è©¦...');
            document.getElementById('output').innerHTML = '';
            await testHealth();
            await new Promise(resolve => setTimeout(resolve, 1000));
            await testRoot();
            updateOutput('ğŸ‰ æ‰€æœ‰æ¸¬è©¦å®Œæˆï¼');
        }
        
        document.getElementById('test-health').addEventListener('click', testHealth);
        document.getElementById('test-root').addEventListener('click', testRoot);
        document.getElementById('test-all').addEventListener('click', testAll);
    </script>
</body>
</html>
